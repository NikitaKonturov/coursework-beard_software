# README.md

## Описание проекта Permutation

Этот проект реализует класс `Permutation` на языке C++, который предоставляет из себя класс перестановка. Класс включает конструкторы, деструктор и набор методов для композиции перестановок, их применения к строкам, а также проверки их корректности.

### 1) Что реализовано

Класс `Permutation` включает следующие основные возможности:

- **Конструкторы**: Реализованы несколько конструкторов для инициализации перестановок различными способами:
  - **Конструктор по умолчанию**: Инициализирует пустую перестановку.
  - **Конструктор с указанием размера**: Инициализирует перестановку указанного размера, при этом каждому индексу сопоставляется он сам.
  - **Конструктор копирования**: Создает копию существующей перестановки.
  - **Конструктор на основе вектора**: Инициализирует перестановку на основе переданного вектора целых чисел.

- **Деструктор**.

- **Ключевые методы**:
  - **`checkPermutation()`**: Проверяет, что перестановка корректна (т.е. нет повторяющихся или пропущенных элементов).
  - **`apply(std::string& string)`**: Применяет перестановку к строке, состоящей из элементов, разделенных пробелами.
  - **`operator*`**: Перегружает оператор умножения для композиции двух перестановок.
  - **`compose(const Permutation& rhs)`**: Выполняет композицию перестановок, применяя сначала правую, затем левую.
  - **Операторы ввода/вывода (`<<` и `>>`)**: Позволяют выводить и вводить перестановку с помощью стандартных потоков.

### 2) Как это работает

- **Создание перестановки**: Перестановка может быть создана с указанием размера (где каждому индексу сопоставлен сам индекс), копированием другой перестановки или на основе вектора чисел, где каждое число задает новую позицию для соответствующего элемента.
  
- **Применение перестановки к строке**: Функция `apply` разбивает строку на блоки, количество которых должно делиться на размер перестановки, и затем переставляет элементы строки в соответствии с порядком перестановки. Если размер строки не кратен размеру перестановки, выбрасывается исключение.

- **Композиция перестановок**: Композиция перестановок выполняется с помощью метода `compose` или оператора умножения `*`. При этом элементы второй перестановки применяются к первой.

- **Проверка корректности**: Метод `checkPermutation` проверяет, что перестановка не содержит дубликатов и охватывает все возможные элементы.

### 3) Что нужно доработать

1. **Обработка исключений**: Добавить более детализированные сообщения об ошибках в случае некорректных данных или попыток некорректных операций.

### 4) Условия работы функций

- **Конструкторы**:
  - Конструктор с вектором ожидает, что вектор содержит уникальные целые числа от 1 до `n` (где `n` — размер вектора).
  
- **`apply()`**:
  - Строка, к которой применяется перестановка, должна быть разделена на элементы пробелами, а их количество должно быть кратно размеру перестановки.
  
- **`checkPermutation()`**:
  - Все элементы перестановки должны быть уникальными, и каждый элемент должен быть представлен один раз.

- **`compose()`** и **`operator*`**:
  - Перестановки должны быть одинакового размера для корректной работы.


### 5) Где выбрасываются ошибки

1. **`checkPermutation()`**:
   - **Строка 49**: Если элемент перестановки с текущим значением не найден в `map`, выбрасывается исключение `std::invalid_argument` с сообщением:  
     ```cpp
     throw std::invalid_argument("Row elements are different!!!");
     ```
     Это ошибка, если какая-либо строка перестановки несовместима.
     
   - **Строка 51**: Если элемент уже существует в множестве `check`, выбрасывается исключение `std::invalid_argument` с тем же сообщением:
     ```cpp
     throw std::invalid_argument("Row elements are different!!!");
     ```
     Это ошибка на случай, если во второй строке перестановки есть повторяющиеся элементы.

2. **`apply(std::string& string)`**:
   - **Строка 65**: Если количество элементов в строке не кратно размеру перестановки, выбрасывается исключение `std::invalid_argument` с сообщением:
     ```cpp
     throw std::invalid_argument("The size of the string is not a multiple of the size of the permutation!");
     ```

3. **`operator*` (перегрузка оператора умножения)**:
   - **Строка 88**: Если индекс из правой перестановки не найден в левой, вызывается метод `map.at(up)`, который выбрасывает исключение `std::out_of_range`, если соответствующего ключа нет. 

4. **`operator>>` (перегрузка оператора ввода)**:
   - **Строка 115**: После ввода перестановки метод `checkPermutation()` вызывается для проверки корректности перестановки. Если перестановка некорректна, выбрасывается исключение с сообщениями, описанными в пункте 1 (строки 49 и 51).